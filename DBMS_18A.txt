CREATE DATABASE DBMS_18A;
USE DBMS_18A;

CREATE TABLE CLIENTMSTR(CLIENTNO INT PRIMARY KEY,CLIENTNAME VARCHAR(50),AMOUNT INT);
CREATE TABLE AUDIT_TRADE(CLIENTNO INT,CLIENTNAME VARCHAR(50),AMOUNT INT,ACTION
VARCHAR(100));

INSERT INTO CLIENTMSTR VALUES (1,"SITA",10000);
INSERT INTO CLIENTMSTR VALUES (2,"GITA",39000);
INSERT INTO CLIENTMSTR VALUES (3,"RITA",70890);
INSERT INTO CLIENTMSTR VALUES (4,"MITA",30000);
INSERT INTO CLIENTMSTR VALUES (5,"WITA",80350);

SELECT * FROM CLIENTMSTR;

CREATE TRIGGER TRG BEFORE DELETE ON CLIENTMSTR FOR EACH ROW INSERT INTO AUDIT_TRADE SET
ACTION='DELETE',CLIENTNO=OLD.CLIENTNO,CLIENTNAME=OLD.CLIENTNAME,AMOUNT=OLD.AMOUNT;

CREATE TRIGGER TRG1 BEFORE UPDATE ON CLIENTMSTR FOR EACH ROW INSERT INTO AUDIT_TRADE SET
ACTION='UPDATE',CLIENTNO=OLD.CLIENTNO,CLIENTNAME=OLD.CLIENTNAME,AMOUNT=OLD.AMOUNT;

UPDATE CLIENTMSTR SET AMOUNT='50000' WHERE CLIENTNO=3;
DELETE FROM CLIENTMSTR WHERE CLIENTNO=5;

SELECT * FROM CLIENTMSTR;
SELECT * FROM AUDIT_TRADE;
