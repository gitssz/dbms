CREATE DATABASE DBMS_18B;
USE DBMS_18B;
CREATE TABLE EMP(E_NO INT , E_NAME VARCHAR(50),SALARY INT, PRIMARY KEY(E_NO));
CREATE TABLE TRACKING(E_NO INT ,E_NAME VARCHAR(50),SALARY INT);

DELIMITER $
CREATE TRIGGER  TRG  BEFORE INSERT ON EMP 
FOR EACH ROW
BEGIN
IF NEW.SALARY < 50000 THEN
SIGNAL SQLSTATE '45000'
SET MESSAGE_TEXT = 'ERROR: SALARY SHOULD BE GREATER THAN 50000!';
ELSE
INSERT INTO TRACKING VALUES(NEW.E_NO,NEW.E_NAME,NEW.SALARY);
END IF;
END $
DELIMITER ;

DELIMITER $
CREATE TRIGGER  TRG2  BEFORE UPDATE ON EMP 
FOR EACH ROW
BEGIN
IF NEW.SALARY < 50000 THEN
SIGNAL SQLSTATE '45000'
SET MESSAGE_TEXT = 'ERROR: SALARY SHOULD BE GREATER THAN 50000!';
ELSE
INSERT INTO TRACKING VALUES(NEW.E_NO,NEW.E_NAME,NEW.SALARY);
END IF;
END $
DELIMITER ;
INSERT INTO EMP VALUES (6,"SHWETA",60000);
INSERT INTO EMP VALUES (57,"SHREYA",40000);

SELECT * FROM EMP;
SELECT * FROM TRACKING;

UPDATE EMP SET SALARY=35000 WHERE E_NO=6;
UPDATE EMP SET SALARY=55000 WHERE E_NO=6;

SELECT * FROM EMP;
SELECT * FROM TRACKING;